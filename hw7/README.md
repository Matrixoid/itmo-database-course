# Домашнее задание 7. Изменение данных

Реализуйте указанные запросы, представления, проверки и триггеры на языке SQL.

<ol>
<li> Напишите запросы, удаляющие студентов
    1. Учащихся в группе, заданной идентификатором (<em>GroupId</em>).
    2. Учащихся в группе, заданной названием (<em>GroupName</em>).
    3. Без оценок.
    4 Имеющих 3 и более оценки.
    5. Имеющих 3 и менее оценки.
    6. Студентов, c долгами (здесь и далее — по отсутствию оценки).
    7. Студентов, имеющих 2 и более долга.
    8. Студентов, имеющих не более 2 долгов.
</li>
<li> Напишите запросы, обновляющие данные студентов
    1. Изменение имени студента (<em>StudentId</em>, <em>StudentName</em>).
    2. Перевод студента из группы в группу по индентификаторам (<em>StudentId</em>, <em>GroupId</em>, <em>FromGroupId</em>).
    3. Перевод всех студентов из группы в группу по идентификаторам (<em>GroupId</em>, <em>FromGroupId</em>).
    4. Перевод всех студентов из группы в группу по названиям (<em>GroupName</em>, <em>FromGroupName</em>).
    5. Перевод всех студентов из группы в группу, только если целевая группа существует (<em>GroupName</em>, <em>FromGroupName</em>).
</li>
<li> Напишите запросы, подсчитывающие статистику по студентам
    1. Число оценок студента (столбец <em>Students.Marks</em>) (<em>StudentId</em>).
    2. Число оценок каждого студента (столбец <em>Students.Marks</em>).
    3. Пересчет числа оценок каждого студента, с учётом новых оценок из таблицы <em>NewMarks</em>, структура которой  такая же как у таблицы <em>Marks</em> (столбец <em>Students.Marks</em>).
    4. Число сданных дисциплин каждого студента (столбец <em>Students.Marks</em>).
    5. Число долгов студента (столбец <em>Students.Debts</em>) (<em>StudentId</em>).
    6. Число долгов каждого студента (столбец <em>Students.Debts</em>).
    7. Число долгов каждого студента группы (столбец <em>Students.Debts</em>) (<em>GroupName</em>).
    8. Число оценок и долгов каждого студента (столбцы <em>Students.Marks</em>, <em>Students.Debts</em>).
</li>
<li> Напишите запросы, обновляющие оценки, с учетом данных из таблицы <em>NewMarks</em>, имеющей такую же структуру, как таблица <em>Marks</em>
    1. Проставляющий новую оценку только если ранее оценки не было.
    2. Проставляющий новую оценку только если ранее оценка была.
    3. Проставляющий максимум из старой и новой оценки только если ранее оценка была.
    4. Проставляющий максимум из старой и новой оценки (если ранее оценки не было, то новую оценку).
</li>
<li> Работа с представлениями
    1. Создайте представление <em>StudentMarks</em> в котором для каждого студента указано число оценок (<em>StudentId</em>, <em>Marks</em>).
    2. Создайте представление <em>AllMarks</em> в котором для каждого студента указано число оценок, включая оценки из таблицы <em>NewMarks</em> (<em>StudentId</em>, <em>Marks</em>).
    3. Создайте представление <em>Debts</em> в котором для каждого студента, имеющего долги указано их число (<em>StudentId</em>, <em>Debts</em>).
    4. Создайте представление <em>StudentDebts</em> в котором для каждого студента указано число долгов (<em>StudentId</em>, <em>Debts</em>).
</li>
<li>Целостность данных.
<p>В комментарии перед каждым запросом укажите версию использованной СУБД.</p>
	1. Добавьте проверку того, что у студентов есть оценки только по дисциплинам из их плана (<em>NoExtraMarks</em>).
    2. Добавьте проверку того, что все студенты каждой группы имеют оценку по одному и тому же набору дисциплин (<em>SameMarks</em>).
    3. Создайте триггер <em>PreserveMarks</em>, не позволяющий уменьшить оценку студента по дисциплине. При попытке такого изменения оценка изменяться не должна.
</li>
</ol>

В рамках проекта:

1. Определите модифицирующие запросы, необходимые для работоспособности проекта.
2. Запишите эти запросы на языке SQL.
3. Определите представления, необходимые для работоспособности проекта.
4. Запишите эти представления на языке SQL.